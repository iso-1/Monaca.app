<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="components/loader.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/styles.css">
    <script src="js/cssua.min.js"></script>
    <script src="js/app.js"></script>
    <script>
    var KEY = "key1";
    // ローカルストレージをセットします。
    function localStorageSetItem() {
        var obj = $("date-deadline").text();
        localStorage.setItem(KEY, JSON.stringify(obj));
        alert("Local Storage: データーをセットしました。")
    }
    // ローカルストレージの値を取得します。。document文書
    function localStorageGetItem() {
        var item = localStorage.getItem(KEY);
        var obj = JSON.parse(item);
        document.getElementById("content").innerHTML = obj;
    }
    
    // ローカルストレージの全データを消去します。ここまで
    function localStorageClear() {
        localStorage.clear();
        document.getElementById("content").innerHTML = "";
    }
</script>
    
</head

<body>
    <div data-role="page" id="list-page"> <!--  data-role page JQmobileのページ作成 -->
        <div data-role="header" data-position="fixed" data-theme="c">
            <h1>TODO App</h1>
            <a href="#add-page" data-icon="add" class="ui-btn-left">追加</a>
            <a href="f.html" data-icon="add" class="ui-btn-right">通知</a>
        </div>
        <div data-role="content">
            <ul data-role="listview" data-inset="true" id="todo-list"></ul>
                       <!-- タイマーここから -->
            <script>

var timer1; //タイマーを格納する変数（タイマーID）の宣言


//カウントダウン関数を1000ミリ秒毎に呼び出す関数
function cntStart()
{
  document.timer.elements[2].disabled=true;
  timer1=setInterval("countDown()",1000);
}

//タイマー停止関数
function cntStop()
{
  document.timer.elements[2].disabled=false;
  clearInterval(timer1);
}

//カウントダウン関数
function countDown()
{
  var day=document.timer.elements[0].value;
  var min=document.timer.elements[0].value;
  var sec=document.timer.elements[1].value;

  if( (min=="") && (sec=="") )
  {
    alert("時刻を設定してください！");
    reSet();
  }
  else
  {
    if (day=="") day=0;
    day=parseInt(day);

    if (min=="") min=0;
    min=parseInt(min);

    if (sec=="") sec=0;
    sec=parseInt(sec);

    tmWrite(min*60+sec-1);
  }
}

//残り時間を書き出す関数
function tmWrite(int)
{
  int=parseInt(int);

  if (int<=0)
  {
    reSet();
    alert("時間です！");
  }
  else
  {
    //残り分数はintを60で割って切り捨てる
    document.timer.elements[0].value=Math.floor(int/60);
    //残り秒数はintを60で割った余り
    document.timer.elements[1].value=int % 60;
      var msg = document.timer.elements[0].value + "分"+ document.timer.elements[1].value + "秒"; // 表示文作成
      document.getElementById("PassageArea").innerHTML = msg; // 表示更新      
  }
}


//フォームを初期状態に戻す（リセット）関数
function reSet()
{
  document.timer.elements[0].value="0";
  document.timer.elements[1].value="0";
  document.timer.elements[2].disabled=false;
  clearInterval(timer1);
}  

</script>

</head>
<body>

<form name="timer">
<input  type="text" value="" > 分 <input type="text" value=""> 秒
<input type="button" value="スタート" onclick="cntStart()" class="sbt">
<input type="button" value="ストップ" onclick="cntStop()" class="sbt" >
</form>

<h4>あと</h4>
<h2 id="PassageArea"></h2>
            <!--ここまで-->
            
        </div>
    </div>

    <div data-role="page" id="add-page">
        <div data-role="header" data-position="fixed" data-theme="c"> 
            <h1>TODOの追加</h1>
            <a href="#list-page" data-icon="back" class="ui-btn-left">戻る</a>
        </div>
        <div data-role="content">
            <input id="todo-title" type="text" placeholder="TODOタイトル">
            <textarea id="todo-body" style="height: 8em" placeholder="説明文"></textarea>

            <input id="add-button" type="button" value="保存" onclick="addTodo(), localStorageSetItem();">
        </div>
    </div>
</body>
</html>